<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />

		<script src="https://unpkg.com/@arenarium/maps@latest/dist/index.umd.cjs"></script>
		<link href="https://unpkg.com/@arenarium/maps@latest/dist/style.css" rel="stylesheet"/>
	</head>
	<body>
		<div id="map"></div>
		<script>
            const map = arenarium.mountMap({
				container: 'map',
				position: {
					center: { lat: 51.505, lng: -0.09 },
					zoom: 13
				},
				style: {
					name: 'dark',
					colors: {
						background: 'black',
						primary: 'yellow',
						text: 'white'
					}
				}
			});

			map.setPopupsContentCallback(async (ids) => {
				return new Promise((resolve) => {
					resolve(ids.map((id) => `<div style="width:150px; height: 100px; background-color:yellow">${id}</div>`));
				});
			});

			const popups = new Array();
			const center = { lat: 51.505, lng: -0.09 };
			const radius = 20;
			const count = 300;

			for (let i = 0; i < count; i++) {
				const distance = radius / (count - i);
				const lat = center.lat + distance * (-1 + Math.random() * 2);
				const lng = center.lng + distance * (-1 + Math.random() * 2);

				popups.push({
					id: i.toString(),
					lat: lat,
					lng: lng,
					height: 100,
					width: 150,
					index: i
				});
			}

			map.setPopups(popups);
        </script>
		<style>
			#map {
				position: fixed;
				top: 0px;
				left: 0px;
				width: 100%;
				height: 100%;
			}
		</style>	
	</body>
</html>
